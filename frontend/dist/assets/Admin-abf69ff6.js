import{b as N,r as I,D as S,j as s,c as e,H as x,G as b,B as g,f as w,F as B,I as M,T as O,a as T,U as V}from"./index-0406734c.js";import{u as F}from"./index.esm-fe288543.js";import{L as o}from"./label-ecebe6ca.js";import{T as X}from"./textarea-3e760802.js";import"./index.module-9b0cc168.js";const R=()=>{const n=N(a=>a.brands.brands),{register:r,control:c,handleSubmit:m,formState:{errors:u},reset:y}=F(),[f,l]=I.useState(!1),[t,i]=I.useState(),d=N(a=>a.phone.phones),[C,z]=I.useState();return I.useEffect(()=>{(async()=>{const k=await(await fetch(S.product.tags)).json();await new Promise(v=>setTimeout(()=>v(""),1e3)),z(k)})()},[]),s("div",{children:[e(x,{type:"h2",children:"Создать продукта"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:m(async a=>{const k=a.files;delete a.files;const v=Number(a.price),P=Number(a.oldPrice),W=Number(a.quantity),A=Number(a.Ram),q=Number(a.Memory);let J;console.log(A);const j={...a,price:v,oldPrice:P,quantity:W,Ram:A,Memory:q};console.log(j);try{const{data:p}=await w.post(S.admin.createProduct,{...j},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});p.message?(l(!0),y()):i("что-то пошло не так"),J=p.id,console.log("data"+p.id)}catch(p){p instanceof Error&&(console.log(p.message),i(p.message))}await new Promise(p=>setTimeout(()=>p(""),1e3));try{const p={files:k[0],productId:J};console.log(p);const{data:E}=await w.post(S.admin.updatePictureProduct,{...p},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs","Content-Type":"multipart/form-data"}});E.message?(l(!0),y()):i("что-то пошло не так")}catch(p){p instanceof Error&&(console.log(p.message),i(p.message))}}),children:[e(o,{htmlFor:"name",children:"Имя"}),e(b,{error:u.name,...r("name",{required:!0}),id:"name"}),e(o,{htmlFor:"Description",children:"Описание"}),e(X,{...r("Description",{required:!0}),id:"Description"}),e(o,{htmlFor:"alias",children:"алиас"}),e(b,{...r("alias",{required:!0}),id:"alias"}),e(o,{htmlFor:"memory",children:"памяти"}),e(b,{type:"number",...r("Memory",{required:!0}),id:"memory"}),e(o,{htmlFor:"ram",children:"ram"}),e(b,{type:"number",...r("Ram",{required:!0}),id:"ram"}),e(o,{htmlFor:"price",children:"Цена"}),e(b,{type:"number",...r("price",{required:!0}),id:"price"}),e(o,{htmlFor:"oldPrice",children:"Старая цена"}),e(b,{type:"number",...r("oldPrice"),id:"oldPrice"}),e(o,{htmlFor:"image",children:"Фото для телефона"}),e(b,{accept:"image/png, image/jpeg",type:"file",...r("files"),id:"image"}),e(o,{htmlFor:"TagId",children:"Теги"}),e("select",{className:"mx-auto text-center block",...r("TagId"),children:C==null?void 0:C.map(a=>e("option",{value:a.name,children:a.name},a.id))}),e(o,{htmlFor:"Color",children:"Цвет"}),e(b,{...r("Color"),id:"Color"}),e(o,{htmlFor:"ColorAlias",children:"Алиас цвета"}),e(b,{...r("ColorAlias"),id:"ColorAlias"}),e(o,{htmlFor:"brandId",children:"бренд"}),e("select",{className:"mx-auto text-center block",...r("brandId"),children:n.map(a=>e("option",{value:a.name,children:a.name},a.id))}),e(b,{type:"number",...r("quantity",{required:!0,min:0}),placeholder:"кол-во на складе",id:"quantity"}),e(o,{htmlFor:"modelDeviceId",children:"Модель"}),e("select",{id:"modelDeviceId",className:"mx-auto text-center block",...r("modelDeviceId"),children:d==null?void 0:d.map(a=>e("option",{value:a.name,children:a.name},a.id))}),e(g,{type:"submit",children:" Создать"})]})]})},U=()=>{const n=N(h=>h.brands.brands);N(h=>h.firstCategory.category);const[r,c]=I.useState(),{register:m,control:u,handleSubmit:y,formState:{errors:f},reset:l}=F(),[t,i]=I.useState(!1),[d,C]=I.useState();return I.useEffect(()=>{(async()=>{const a=await(await fetch(S.product.getByCategory,{method:"post"})).json();await new Promise(k=>setTimeout(()=>k(""),1e3)),c(a)})()}),s("div",{children:[e(x,{type:"h2",children:"Создать модели"}),s("form",{action:"",className:"space-y-6 bg-white rounded-3xl text-center w-full",onSubmit:y(async h=>{console.log(h);try{const{data:a}=await w.post(S.admin.createModel,{...h},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});a.message?(i(!0),l()):C("что-то пошло не так"),console.log("success")}catch(a){a instanceof Error&&C(a.message)}}),children:[e(o,{htmlFor:"name",children:"Имя"}),e(b,{error:f.name,...m("name",{required:!0}),id:"name"}),e(o,{htmlFor:"brandId",children:"бренд"}),e("select",{className:"mx-auto text-center block",...m("brandId"),children:n.map(h=>e("option",{value:h.id,children:h.name},h.id))}),e(o,{htmlFor:"secondCategoryId",children:"secondCategoryId"}),e("select",{className:"mx-auto text-center block",...m("secondCategoryId",{required:!0}),children:r==null?void 0:r.map(h=>e("option",{value:h.id,children:h.name},h.id))}),e(g,{type:"submit",children:" Создать"})]})]})},_=()=>{const n=N(t=>t.brands.brands),r=N(t=>t.firstCategory.category),{register:c,control:m,handleSubmit:u,formState:{errors:y},reset:f}=F();return s(B,{children:[e(x,{type:"h1",children:"Создание второй категории с брендами"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:u(async t=>{console.log(t);try{const{data:i}=await w.post(S.admin.createCategory,{...t},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});i.message&&f()}catch(i){i instanceof Error&&console.log(i.message)}}),children:[e(o,{htmlFor:"alias",children:"name alias"}),e(b,{...c("alias",{required:!0}),id:"alias"}),e(o,{htmlFor:"name",children:"name category"}),e(b,{...c("name",{required:!0}),id:"name"}),e(o,{htmlFor:"alias",children:"firstLevelId"}),e("select",{className:"mx-auto text-center block",...c("firstLevelId"),children:r==null?void 0:r.map(t=>e("option",{value:t.id,children:t.name},t.id))}),e(o,{htmlFor:"brands",children:"brands"}),e("select",{multiple:!0,className:"mx-auto text-center block",...c("id"),children:n==null?void 0:n.map(t=>e("option",{value:t.id,children:t.name},t.id))}),e(g,{type:"submit",children:"Создать"})]})]})},L=()=>{const[n,r]=I.useState(),{register:c,control:m,handleSubmit:u,formState:{errors:y},reset:f}=F();return I.useEffect(()=>{(async()=>{const i=await(await fetch(S.product.getByCategory,{method:"post"})).json();await new Promise(d=>setTimeout(()=>d(""),1e3)),r(i)})()},[]),s(B,{children:[e(x,{type:"h1",children:"Создание второй категории с брендами"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:u(async t=>{const i=t.files;delete t.files,t.files=i[0];const d={categories:t.categories,name:t.name};console.log(d);try{const{data:C}=await w.post(S.admin.createBrand,{...d},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});C.message&&f()}catch(C){C instanceof Error&&console.log(C.message)}}),children:[e(o,{htmlFor:"name",children:"name brand"}),e(b,{...c("name",{required:!0}),id:"name"}),e(b,{accept:"image/png, image/jpeg",type:"file",...c("files"),id:"image"}),e(o,{htmlFor:"categories",children:"secondCategories"}),e("select",{id:"categories",multiple:!0,className:"mx-auto text-center block",...c("categories",{required:!0}),children:n==null?void 0:n.map(t=>e("option",{value:t.id,children:t.name},t.id))}),e(g,{type:"submit",children:"Создать"})]})]})},G=()=>{const n=N(l=>l.phone.staticPhones),{register:r,control:c,handleSubmit:m,formState:{errors:u},reset:y}=F();return e("div",{children:s("form",{onSubmit:m(async l=>{const t={files:l.files[0],productId:l.productId};console.log(t);try{const{data:i}=await w.post(S.admin.updatePictureProduct,{...t},{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});i.message&&(console.log(i.message),y())}catch(i){i instanceof Error&&console.log(i.message)}}),children:[e(x,{type:"h1",children:"Добавить фотографию"}),e("select",{id:"productId",className:"mx-auto text-center block",...r("productId",{required:!0}),children:n==null?void 0:n.map(l=>l.product.map(t=>e("option",{value:t.id,children:t.name},t.id)))}),e(o,{htmlFor:"addImageFile",children:"Добавить фотографию"}),e(M,{type:"file",...r("files",{required:!0}),id:"addImageFile"}),e(g,{type:"submit",children:"Добавить фотографию"})]})})},Q=()=>{const n=N(i=>i.phone.phones),[r,c]=I.useState(""),{register:m,control:u,handleSubmit:y,formState:{errors:f},reset:l}=F(),t=n==null?void 0:n.filter(i=>i.name.includes(r));return s("div",{className:"p-10 bg-white space-y-5 rounded-3xl text-center",children:[s("select",{className:"mx-auto text-center block",...m("id"),children:[e("input",{type:"text",onChange:i=>c(i.type)}),e(x,{type:"h1",children:"Удалить модель"}),t==null?void 0:t.map(i=>e("option",{value:i.name,children:i.name},i.id))]}),e(g,{children:"Удалить модель"})]})},Y=()=>{const n=N(d=>d.phone.phones),[r,c]=I.useState(""),{register:m,control:u,handleSubmit:y,formState:{errors:f},reset:l}=F(),t=n==null?void 0:n.map(d=>d.product.map(C=>C)).flat(),i=t==null?void 0:t.filter(d=>d.name.includes(r));return s("div",{className:"p-10 bg-white space-y-5 rounded-3xl text-center",children:[e(x,{type:"h1",children:"Удалить продукт"}),s("select",{className:"mx-auto text-center block",...m("id"),children:[e("input",{type:"text",onChange:d=>c(d.type)}),i==null?void 0:i.map(d=>e("option",{value:d.name,children:d.name},d.id))]}),e(g,{children:"Удалить"})]})},Z=({user:n,onDelete:r})=>s("div",{className:"p-10 flex flex-wrap justify-between items-center",children:[s("div",{children:[s(x,{type:"h2",children:["login: ",n.login]}),s(x,{type:"h2",children:["email: ",n.email]})]}),s("div",{className:"sm:space-x-10",children:[s("span",{children:["Активирован:",n.isActive.toString()]}),e(g,{onClick:r,children:"Удалить юзера"})]})]}),H=({users:n,onChange:r})=>{const[c]=O(),m=async u=>{await c({id:u}),r()};return e("div",{className:"bg-white mx-auto p-10",children:n.map(u=>e(Z,{onDelete:()=>m(u.id),user:u},u.id))})},re=()=>{const[n,r]=I.useState(),[c,m]=I.useState(),u=T(),y=N(t=>t.user.user),f=t=>{u(t,{replace:!0})},l=V({});return(y==null?void 0:y.email)!=="damur2004@gmail.com"&&f("/"),s("div",{className:"h-full",children:[s("div",{className:"flex justify-around my-10 text-white",children:[e("button",{className:"bg-orange-500 px-5 py-2 rounded-full",onClick:()=>{m("data")},children:"Данные"}),e("button",{className:"bg-orange-500 px-5 py-2 rounded-full",onClick:()=>{m("editData")},children:"Создание и редактирование продуктов и категории"})]}),c==="data"&&s(B,{children:[s("div",{className:"mx-5 space-y-2 sm:flex space-y-0 justify-around my-15",children:[e(g,{onClick:()=>r("isAddImageProduct"),children:"isAddImageProduct"}),e(g,{onClick:()=>r("isCreatePhone"),children:"isCreatePhone"}),e(g,{onClick:()=>r("isCreateModel"),children:"isCreateModel"}),e(g,{onClick:()=>r("deleteProduct"),children:"deleteProduct"}),e(g,{onClick:()=>r("deleteModel"),children:"deleteModel"}),e(g,{onClick:()=>r("isCreateSecondCategoryWithBrand"),children:"isCreateSecondCategoryWithBrand"}),e(g,{onClick:()=>r("isCreateBrandsWIthSecond"),children:"isCreateBrandsWIthSecond"})]}),n==="isAddImageProduct"&&e(G,{}),n==="isCreatePhone"&&e(R,{}),n==="deleteModel"&&e(Q,{}),n==="deleteProduct"&&e(Y,{}),n==="isCreateModel"&&e(U,{}),n==="isCreateSecondCategoryWithBrand"&&e(_,{}),n==="isCreateBrandsWIthSecond"&&e(L,{})]}),c==="editData"&&e(B,{children:l.data&&e(H,{onChange:()=>l.refetch(),users:l.data})})]})};export{re as default};
