import{b as N,r as y,j as s,c as e,H as S,G as b,B as g,f as F,D as w,F as z,I as M,T as O,U as T}from"./index-5dd63a37.js";import{u as x}from"./index.esm-5614a77f.js";import{L as a}from"./label-4337ff5d.js";import{T as V}from"./textarea-97908050.js";import"./index.module-786cb49c.js";const X=()=>{const n=N(o=>o.brands.brands),{register:t,control:c,handleSubmit:m,formState:{errors:d},reset:C}=x(),[f,p]=y.useState(!1),[r,i]=y.useState(),l=N(o=>o.phone.phones),[I,B]=y.useState();return y.useEffect(()=>{(async()=>{const k=await(await fetch("http://localhost:8000/product/tags")).json();await new Promise(A=>setTimeout(()=>A(""),1e3)),B(k)})()},[]),s("div",{children:[e(S,{type:"h2",children:"Создать продукта"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:m(async o=>{const k=o.files;delete o.files;const A=Number(o.price),P=Number(o.oldPrice),W=Number(o.quantity),J=Number(o.Ram),q=Number(o.Memory);let j;console.log(J);const v={...o,price:A,oldPrice:P,quantity:W,Ram:J,Memory:q};console.log(v);try{const{data:h}=await F.post(w.admin.createProduct,{...v},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});h.message?(p(!0),C()):i("что-то пошло не так"),j=h.id,console.log("data"+h.id)}catch(h){h instanceof Error&&(console.log(h.message),i(h.message))}await new Promise(h=>setTimeout(()=>h(""),1e3));try{const h={files:k[0],productId:j};console.log(h);const{data:E}=await F.post(w.admin.updatePictureProduct,{...h},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs","Content-Type":"multipart/form-data"}});E.message?(p(!0),C()):i("что-то пошло не так")}catch(h){h instanceof Error&&(console.log(h.message),i(h.message))}}),children:[e(a,{htmlFor:"name",children:"Имя"}),e(b,{error:d.name,...t("name",{required:!0}),id:"name"}),e(a,{htmlFor:"Description",children:"Описание"}),e(V,{...t("Description",{required:!0}),id:"Description"}),e(a,{htmlFor:"alias",children:"алиас"}),e(b,{...t("alias",{required:!0}),id:"alias"}),e(a,{htmlFor:"memory",children:"памяти"}),e(b,{type:"number",...t("Memory",{required:!0}),id:"memory"}),e(a,{htmlFor:"ram",children:"ram"}),e(b,{type:"number",...t("Ram",{required:!0}),id:"ram"}),e(a,{htmlFor:"price",children:"Цена"}),e(b,{type:"number",...t("price",{required:!0}),id:"price"}),e(a,{htmlFor:"oldPrice",children:"Старая цена"}),e(b,{type:"number",...t("oldPrice"),id:"oldPrice"}),e(a,{htmlFor:"image",children:"Фото для телефона"}),e(b,{accept:"image/png, image/jpeg",type:"file",...t("files"),id:"image"}),e(a,{htmlFor:"TagId",children:"Теги"}),e("select",{className:"mx-auto text-center block",...t("TagId"),children:I==null?void 0:I.map(o=>e("option",{value:o.name,children:o.name},o.id))}),e(a,{htmlFor:"Color",children:"Цвет"}),e(b,{...t("Color"),id:"Color"}),e(a,{htmlFor:"ColorAlias",children:"Алиас цвета"}),e(b,{...t("ColorAlias"),id:"ColorAlias"}),e(a,{htmlFor:"brandId",children:"бренд"}),e("select",{className:"mx-auto text-center block",...t("brandId"),children:n.map(o=>e("option",{value:o.name,children:o.name},o.id))}),e(b,{type:"number",...t("quantity",{required:!0,min:0}),placeholder:"кол-во на складе",id:"quantity"}),e(a,{htmlFor:"modelDeviceId",children:"Модель"}),e("select",{id:"modelDeviceId",className:"mx-auto text-center block",...t("modelDeviceId"),children:l==null?void 0:l.map(o=>e("option",{value:o.name,children:o.name},o.id))}),e(g,{type:"submit",children:" Создать"})]})]})},R=()=>{const n=N(u=>u.brands.brands);N(u=>u.firstCategory.category);const[t,c]=y.useState(),{register:m,control:d,handleSubmit:C,formState:{errors:f},reset:p}=x(),[r,i]=y.useState(!1),[l,I]=y.useState();return y.useEffect(()=>{(async()=>{const o=await(await fetch("http://localhost:8000/product/byCategory",{method:"post"})).json();await new Promise(k=>setTimeout(()=>k(""),1e3)),c(o)})()}),s("div",{children:[e(S,{type:"h2",children:"Создать модели"}),s("form",{action:"",className:"space-y-6 bg-white rounded-3xl text-center w-full",onSubmit:C(async u=>{console.log(u);try{const{data:o}=await F.post(w.admin.createModel,{...u},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});o.message?(i(!0),p()):I("что-то пошло не так"),console.log("success")}catch(o){o instanceof Error&&I(o.message)}}),children:[e(a,{htmlFor:"name",children:"Имя"}),e(b,{error:f.name,...m("name",{required:!0}),id:"name"}),e(a,{htmlFor:"brandId",children:"бренд"}),e("select",{className:"mx-auto text-center block",...m("brandId"),children:n.map(u=>e("option",{value:u.id,children:u.name},u.id))}),e(a,{htmlFor:"secondCategoryId",children:"secondCategoryId"}),e("select",{className:"mx-auto text-center block",...m("secondCategoryId",{required:!0}),children:t==null?void 0:t.map(u=>e("option",{value:u.id,children:u.name},u.id))}),e(g,{type:"submit",children:" Создать"})]})]})},U=()=>{const n=N(r=>r.brands.brands),t=N(r=>r.firstCategory.category),{register:c,control:m,handleSubmit:d,formState:{errors:C},reset:f}=x();return s(z,{children:[e(S,{type:"h1",children:"Создание второй категории с брендами"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:d(async r=>{console.log(r);try{const{data:i}=await F.post(w.admin.createCategory,{...r},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});i.message&&f()}catch(i){i instanceof Error&&console.log(i.message)}}),children:[e(a,{htmlFor:"alias",children:"name alias"}),e(b,{...c("alias",{required:!0}),id:"alias"}),e(a,{htmlFor:"name",children:"name category"}),e(b,{...c("name",{required:!0}),id:"name"}),e(a,{htmlFor:"alias",children:"firstLevelId"}),e("select",{className:"mx-auto text-center block",...c("firstLevelId"),children:t==null?void 0:t.map(r=>e("option",{value:r.id,children:r.name},r.id))}),e(a,{htmlFor:"brands",children:"brands"}),e("select",{multiple:!0,className:"mx-auto text-center block",...c("id"),children:n==null?void 0:n.map(r=>e("option",{value:r.id,children:r.name},r.id))}),e(g,{type:"submit",children:"Создать"})]})]})},_=()=>{const[n,t]=y.useState(),{register:c,control:m,handleSubmit:d,formState:{errors:C},reset:f}=x();return y.useEffect(()=>{(async()=>{const i=await(await fetch("http://localhost:8000/product/byCategory",{method:"post"})).json();await new Promise(l=>setTimeout(()=>l(""),1e3)),t(i)})()},[]),s(z,{children:[e(S,{type:"h1",children:"Создание второй категории с брендами"}),s("form",{action:"",className:"bg-white space-y-8 rounded-3xl text-center w-full",onSubmit:d(async r=>{const i=r.files;delete r.files,r.files=i[0];const l={categories:r.categories,name:r.name};console.log(l);try{const{data:I}=await F.post(w.admin.createBrand,{...l},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});I.message&&f()}catch(I){I instanceof Error&&console.log(I.message)}}),children:[e(a,{htmlFor:"name",children:"name brand"}),e(b,{...c("name",{required:!0}),id:"name"}),e(b,{accept:"image/png, image/jpeg",type:"file",...c("files"),id:"image"}),e(a,{htmlFor:"categories",children:"secondCategories"}),e("select",{id:"categories",multiple:!0,className:"mx-auto text-center block",...c("categories",{required:!0}),children:n==null?void 0:n.map(r=>e("option",{value:r.id,children:r.name},r.id))}),e(g,{type:"submit",children:"Создать"})]})]})},L=()=>{const n=N(p=>p.phone.staticPhones),{register:t,control:c,handleSubmit:m,formState:{errors:d},reset:C}=x();return e("div",{children:s("form",{onSubmit:m(async p=>{const r={files:p.files[0],productId:p.productId};console.log(r);try{const{data:i}=await F.post(w.admin.updatePictureProduct,{...r},{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhbXVyMjAwNEBnbWFpbC5jb20iLCJpYXQiOjE2NzUzMzI2OTB9.T2hefmVdkX_Zg54NtF_OAg-6u0N6-uk8nqVcWn22Rbs"}});i.message&&(console.log(i.message),C())}catch(i){i instanceof Error&&console.log(i.message)}}),children:[e(S,{type:"h1",children:"Добавить фотографию"}),e("select",{id:"productId",className:"mx-auto text-center block",...t("productId",{required:!0}),children:n==null?void 0:n.map(p=>p.product.map(r=>e("option",{value:r.id,children:r.name},r.id)))}),e(a,{htmlFor:"addImageFile",children:"Добавить фотографию"}),e(M,{type:"file",...t("files",{required:!0}),id:"addImageFile"}),e(g,{type:"submit",children:"Добавить фотографию"})]})})},G=()=>{const n=N(i=>i.phone.phones),[t,c]=y.useState(""),{register:m,control:d,handleSubmit:C,formState:{errors:f},reset:p}=x(),r=n==null?void 0:n.filter(i=>i.name.includes(t));return s("div",{className:"p-10 bg-white space-y-5 rounded-3xl text-center",children:[s("select",{className:"mx-auto text-center block",...m("id"),children:[e("input",{type:"text",onChange:i=>c(i.type)}),e(S,{type:"h1",children:"Удалить модель"}),r==null?void 0:r.map(i=>e("option",{value:i.name,children:i.name},i.id))]}),e(g,{children:"Удалить модель"})]})},Q=()=>{const n=N(l=>l.phone.phones),[t,c]=y.useState(""),{register:m,control:d,handleSubmit:C,formState:{errors:f},reset:p}=x(),r=n==null?void 0:n.map(l=>l.product.map(I=>I)).flat(),i=r==null?void 0:r.filter(l=>l.name.includes(t));return s("div",{className:"p-10 bg-white space-y-5 rounded-3xl text-center",children:[e(S,{type:"h1",children:"Удалить продукт"}),s("select",{className:"mx-auto text-center block",...m("id"),children:[e("input",{type:"text",onChange:l=>c(l.type)}),i==null?void 0:i.map(l=>e("option",{value:l.name,children:l.name},l.id))]}),e(g,{children:"Удалить"})]})},Y=({user:n,onDelete:t})=>s("div",{className:"p-10 flex flex-wrap justify-between items-center",children:[s("div",{children:[s(S,{type:"h2",children:["login: ",n.login]}),s(S,{type:"h2",children:["email: ",n.email]})]}),s("div",{className:"sm:space-x-10",children:[s("span",{children:["Активирован:",n.isActive.toString()]}),e(g,{onClick:t,children:"Удалить юзера"})]})]}),Z=({users:n,onChange:t})=>{const[c]=O(),m=async d=>{await c({id:d}),t()};return e("div",{className:"bg-white mx-auto p-10",children:n.map(d=>e(Y,{onDelete:()=>m(d.id),user:d},d.id))})},te=()=>{const[n,t]=y.useState(),[c,m]=y.useState(),d=T({});return s("div",{className:"h-full",children:[s("div",{className:"flex justify-around my-10 text-white",children:[e("button",{className:"bg-orange-500 px-5 py-2 rounded-full",onClick:()=>{m("data")},children:"Данные"}),e("button",{className:"bg-orange-500 px-5 py-2 rounded-full",onClick:()=>{m("editData")},children:"Создание и редактирование продуктов и категории"})]}),c==="data"&&s(z,{children:[s("div",{className:"mx-5 space-y-2 sm:flex space-y-0 justify-around my-15",children:[e(g,{onClick:()=>t("isAddImageProduct"),children:"isAddImageProduct"}),e(g,{onClick:()=>t("isCreatePhone"),children:"isCreatePhone"}),e(g,{onClick:()=>t("isCreateModel"),children:"isCreateModel"}),e(g,{onClick:()=>t("deleteProduct"),children:"deleteProduct"}),e(g,{onClick:()=>t("deleteModel"),children:"deleteModel"}),e(g,{onClick:()=>t("isCreateSecondCategoryWithBrand"),children:"isCreateSecondCategoryWithBrand"}),e(g,{onClick:()=>t("isCreateBrandsWIthSecond"),children:"isCreateBrandsWIthSecond"})]}),n==="isAddImageProduct"&&e(L,{}),n==="isCreatePhone"&&e(X,{}),n==="deleteModel"&&e(G,{}),n==="deleteProduct"&&e(Q,{}),n==="isCreateModel"&&e(R,{}),n==="isCreateSecondCategoryWithBrand"&&e(U,{}),n==="isCreateBrandsWIthSecond"&&e(_,{})]}),c==="editData"&&e(z,{children:d.data&&e(Z,{onChange:()=>d.refetch(),users:d.data})})]})};export{te as default};
